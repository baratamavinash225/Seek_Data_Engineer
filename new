{
  "type" : "index_hadoop",
  "spec" : {
    "ioConfig" : {
      "type" : "hadoop",
      "inputSpec" : {
        "type" : "static",
        "paths" : "inputPath"
      }
    },
    "dataSchema" : {
      "dataSource" : "stp_rtt_vmas_scores_summary_hourly",
      "granularitySpec" : {
        "type" : "uniform",
        "segmentGranularity" : "HOUR",
        "queryGranularity" : "none",
        "rollup" : "false",
        "intervals" : ["timeperiod"]
      },

      "parser" : {
        "type" : "hadoopString",
        "parseSpec" : {
          "format" : "tsv",
          "columns" : ["SCORE_DATE_HR","SUBSCRIBER_ID","MDN","IMSI","IMEI","MAKE","MODEL","AF_PCT","AF_FAILURE","AF_ATTEMPTS","RSF_PCT","RSF_FAILURE","RSF_ATTEMPTS","SRF_PCT","SERVICE_REQUEST_FAILURES_CNT","SERVICE_REQUEST_ATTEMPTS_CNT","PCF_PCT","SESSION_SETUP_FAILURES_CNT","SESSION_SETUP_ATTEMPTS_CNT","CD_PCT","CONTEXT_DROPS_CNT","CONTEXT_EVENTS_CNT","SIP_DROPPED_CALLS_PCT","VOLTE_VOICE_CALLS_DROPPED_CNT","VOLTE_VOICE_SETUP_INCOMPLETE_CALLS_CNT","RRC_RADIO_DROP_PCT","RADIO_BEARER_DROPS_CNT","RADIO_BEARER_SETUP_ATTEMPTS_CNT","DOWNLINK_THROUGHPUT_KBPS","UPLINK_THROUGHPUT_KBPS","DOWNLINK_DATA_VOLUME","DOWNLINK_ACTIVE_TIME_MS","UPLINK_DATA_VOLUME","UPLINK_ACTIVE_TIME_MS","TRAVELLING_INDICATOR","TRAVELLING_INDICATOR_CNT","VOLUME_WEIGHTED_UPLINK_THPT_KBPS","VOLUME_WEIGHTED_DOWNLINK_THPT_KBPS","ATTACH_FAILURE_PCT_WEIGHT","RRC_SETUP_FAILURE_PCT_WEIGHT","SRF_PCT_WEIGHT","PCF_PCT_WEIGHT","CD_PCT_WEIGHT","SIP_DROPPED_CALLS_PCT_WEIGHT","RRC_RADIO_DROP_PCT_WEIGHT","DOWNLINK_THROUGHPUT_KBPS_WEIGHT","UPLINK_THROUGHPUT_KBPS_WEIGHT","UES_VOICE_RETAINABILITY","UES_VOICE_RELIABILITY","DATA_SCORE","UES_ALLSERV","PREFERENCE_RATIO","SAME_AREA_SCORE","SAME_AREA_COUNT","SAME_DEVICE_SCORE","SAME_DEVICE_COUNT","LOAD_TIME","SCORE_DT","SCORE_HR"]
                  ,
                  "delimiter" : "|",
          "dimensionsSpec" : {
            "dimensions" : [
                                 "SUBSCRIBER_ID",
                                 "MODEL",
                                 "MAKE",
                                 "MDN",
                                 "IMEI",
                                 "IMSI"
                                ]
          },
            "timestampSpec" : {
            "column" : "SCORE_DATE_HR",
            "format" : "yyyyMMddHH"
          }
        }
      },
      "metricsSpec" : [
        
        {
                "type": "doubleMax",
                "name": "MAX_DATA_SCORE",
                "fieldName" : "DATA_SCORE"
        },                      
        {
                "type": "doubleMax",
                "name": "MAX_PREFERENCE_RATIO",
                "fieldName" : "PREFERENCE_RATIO"
        },               
        {
                "type": "longMax",
                "name": "MAX_SAME_DEVICE_COUNT",
                "fieldName" : "SAME_DEVICE_COUNT"
        },
        {
                "type": "doubleMax",
                "name": "MAX_SAME_AREA_SCORE",
                "fieldName" : "SAME_AREA_SCORE"
        },
	    {
                "type": "doubleMax",
                "name": "MAX_SAME_DEVICE_SCORE",
                "fieldName" : "SAME_DEVICE_SCORE"
        },
	    {
                "type": "doubleMax",
                "name": "MAX_SAME_AREA_COUNT",
                "fieldName" : "SAME_AREA_COUNT"
        },
        {
                "type": "doubleMax",
                "name": "MAX_AF_PCT",
                "fieldName" : "AF_PCT"
        },
        {
                "type": "longMax",
                "name": "MAX_AF_FAILURE",
                "fieldName" : "AF_FAILURE"
        },
        {
                "type": "longMax",
                "name": "MAX_AF_ATTEMPTS",
                "fieldName" : "AF_ATTEMPTS"
        },
        {
                "type": "doubleMax",
                "name": "MAX_RSF_PCT",
                "fieldName" : "RSF_PCT"
        },
               {
                "type": "longMax",
                "name": "MAX_RSF_FAILURE",
                "fieldName" : "RSF_FAILURE"
        },
        {
                "type": "longMax",
                "name": "MAX_RSF_ATTEMPTS",
                "fieldName" : "MAX_RSF_ATTEMPTS"
        },
        {
                "type": "doubleMax",
                "name": "MAX_SRF_PCT",
                "fieldName" : "SRF_PCT"
        },
               {
                "type": "longMax",
                "name": "MAX_SERVICE_REQUEST_FAILURES_CNT",
                "fieldName" : "SERVICE_REQUEST_FAILURES_CNT"
        },
        {
                "type": "longMax",
                "name": "MAX_SERVICE_REQUEST_ATTEMPTS_CNT",
                "fieldName" : "SERVICE_REQUEST_ATTEMPTS_CNT"
        },
                {
                "type": "doubleMax",
                "name": "MAX_PCF_PCT",
                "fieldName" : "PCF_PCT"
        },
		{
                  "type": "doubleMax",
                "name": "MAX_CD_PCT",
                "fieldName" : "CD_PCT"
        },
		{
                "type": "doubleMax",
                "name": "MAX_SESSION_SETUP_FAILURES_CNT",
                "fieldName" : "SESSION_SETUP_FAILURES_CNT"
        },
	    {
                "type": "doubleMax",
                "name": "MAX_SESSION_SETUP_ATTEMPTS_CNT",
                "fieldName" : "SESSION_SETUP_ATTEMPTS_CNT"
        },
	    {
                "type": "doubleMax",
                "name": "MAX_CONTEXT_DROPS_CNT",
                "fieldName" : "CONTEXT_DROPS_CNT"
        },
	    {
                "type": "doubleMax",
                "name": "MAX_CONTEXT_EVENTS_CNT",
                "fieldName" : "CONTEXT_EVENTS_CNT"
        },
	    {
                "type": "doubleMax",
                "name": "MAX_SIP_DROPPED_CALLS_PCT",
                "fieldName" : "SIP_DROPPED_CALLS_PCT"
        },
	    {
                "type": "doubleMax",
                "name": "MAX_RRC_RADIO_DROP_PCT",
                "fieldName" : "RRC_RADIO_DROP_PCT"
        },
	    {
                "type": "doubleMax",
                "name": "MAX_RADIO_BEARER_DROPS_CNT",
                "fieldName" : "RADIO_BEARER_DROPS_CNT"
        },
	    {
                "type": "doubleMax",
                "name": "MAX_RADIO_BEARER_SETUP_ATTEMPTS_CNT",
                "fieldName" : "RADIO_BEARER_SETUP_ATTEMPTS_CNT"
        },
	    {
                "type": "doubleMax",
                "name": "MAX_DOWNLINK_THROUGHPUT_KBPS",
                "fieldName" : "DOWNLINK_THROUGHPUT_KBPS"
        },
	    {
                "type": "doubleMax",
                "name": "MAX_UPLINK_THROUGHPUT_KBPS",
                "fieldName" : "UPLINK_THROUGHPUT_KBPS"
        },
	    {
                "type": "doubleMax",
                "name": "MAX_DOWNLINK_DATA_VOLUME",
                "fieldName" : "DOWNLINK_DATA_VOLUME"
        },
	    {
                "type": "doubleMax",
                "name": "MAX_DOWNLINK_ACTIVE_TIME_MS",
                "fieldName" : "DOWNLINK_ACTIVE_TIME_MS"
        },
	    {
                "type": "doubleMax",
                "name": "MAX_UPLINK_DATA_VOLUME",
                "fieldName" : "UPLINK_DATA_VOLUME"
        },
	    {
                "type": "doubleMax",
                "name": "MAX_UPLINK_ACTIVE_TIME_MS",
                "fieldName" : "UPLINK_ACTIVE_TIME_MS"
        },
        {
                "type": "doubleMax",
                "name": "MAX_TRAVELLING_INDICATOR_CNT",
                "fieldName" : "TRAVELLING_INDICATOR_CNT"
        },
	    {
                "type": "doubleMax",
                "name": "MAX_VOLUME_WEIGHTED_UPLINK_THPT_KBPS",
                "fieldName" : "VOLUME_WEIGHTED_UPLINK_THPT_KBPS"
        },
        {
                "type": "doubleMax",
                "name": "MAX_VOLUME_WEIGHTED_DOWNLINK_THPT_KBPS",
                "fieldName" : "VOLUME_WEIGHTED_DOWNLINK_THPT_KBPS"
        },
	    {
                "type": "doubleMax",
                "name": "MAX_UES_VOICE_RETAINABILITY",
                "fieldName" : "UES_VOICE_RETAINABILITY"
        },
        {
                "type": "doubleMax",
                "name": "MAX_UES_VOICE_RELIABILITY",
                "fieldName" : "UES_VOICE_RELIABILITY"
        },
        {
                "type": "doubleMax",
                "name": "MAX_UES_ALLSERV",
                "fieldName" : "UES_ALLSERV"
        }
		]
    },
    "tuningConfig" : {
      "type" : "hadoop",
      "useCombiner": true,
      "indexSpec": {
          "bitmap": {
            "type": "roaring"
          }
      },
      "partitionsSpec" : {
        "type" : "hashed",
        "targetPartitionSize" : 1000000,
        "maxPartitionSize" : 7500000,
        "assumeGrouped" : true,
        "numShards" : -1
      },
      "jobProperties" : {
                        "mapreduce.map.java.opts":"-Duser.timezone=UTC -Dfile.encoding=UTF-8", "mapreduce.reduce.java.opts":"-Duser.timezone=UTC -Dfile.encoding=UTF-8"
          }
    }
  }
}
