{
  "type" : "index_hadoop",
  "spec" : {
    "ioConfig" : {
      "type" : "hadoop",
      "inputSpec" : {
        "type" : "static",
        "paths" : "inputPath"
      }
    },
    "dataSchema" : {
      "dataSource" : "stp_rtt_vmas_scores_summary_hourly",
      "granularitySpec" : {
        "type" : "uniform",
        "segmentGranularity" : "day",
        "queryGranularity" : "none",
        "rollup" : "false",
        "intervals" : ["timeperiod"]
      },

      "parser" : {
        "type" : "hadoopString",
        "parseSpec" : {
          "format" : "psv",
          "columns" : ["score_date_hr","subscriber_id","mdn","imsi","imei","make","model","attach_failure_pct","attach_failure_cnt","attach_attempts_cnt","rrc_setup_failure_pct","rrc_setup_failure_cnt","rrc_setup_attempts_cnt","srf_pct","service_request_failures_cnt","service_request_attempts_cnt","pcf_pct","session_setup_failures_cnt","session_setup_attempts_cnt","cd_pct","context_drops_cnt","context_events_cnt","sip_dropped_calls_pct","volte_voice_calls_dropped_cnt","volte_voice_setup_incomplete_calls_cnt","rrc_radio_drop_pct","radio_bearer_drops_cnt","radio_bearer_setup_attempts_cnt","downlink_throughput_kbps","uplink_throughput_kbps","downlink_data_volume","downlink_active_time_ms","uplink_data_volume","uplink_active_time_ms","travelling_indicator","travelling_indicator_cnt","volume_weighted_uplink_thpt_kbps","volume_weighted_downlink_thpt_kbps","attach_failure_pct_weight","rrc_setup_failure_pct_weight","srf_pct_weight","pcf_pct_weight","cd_pct_weight","sip_dropped_calls_pct_weight","rrc_radio_drop_pct_weight","downlink_throughput_kbps_weight","uplink_throughput_kbps_weight","ues_voice_retainability","ues_voice_reliability","ues_data","ues_allserv","preference_ratio","enb_simple_area_agg_score","enb_area_subscriber_count","enb_simple_device_agg_score","enb_device_subscriber_count","load_time","score_dt","score_hr"]
                  ,
                  "delimiter" : "|",
          "dimensionsSpec" : {
            "dimensions" : [
                                             "subscriber_id",
                                 "model",
                                 "make",
                                 "mdn",
                                 "imei",
                                 "imsi"
                                ]
          },
            "timestampSpec" : {
            "column" : "score_date_hr",
            "format" : "yyyyMMddHH"
          }
        }
      },
      "metricsSpec" : [
		{
                "type": "longMax",
                "name": "max_rrc_setup_attempts_cnt",
                "fieldName" : "rrc_setup_attempts_cnt"
        },
		{
                "type": "longMax",
                "name": "max_rrc_setup_failure_cnt",
                "fieldName" : "rrc_setup_failure_cnt"
        },
		{
                "type": "doubleMax",
                "name": "max_rrc_setup_failure_pct",
                "fieldName" : "rrc_setup_failure_pct"
        },
		{
                "type": "longMax",
                "name": "max_attach_attempts_cnt",
                "fieldName" : "attach_attempts_cnt"
        },
		{
                "type": "longMax",
                "name": "max_attach_failure_cnt",
                "fieldName" : "attach_failure_cnt"
        },
		{
                "type": "longMax",
                "name": "max_travelling_indicator",
                "fieldName" : "travelling_indicator"
        },
		{
                "type": "doubleMax",
                "name": "max_attach_failure_pct",
                "fieldName" : "attach_failure_pct"
        },
		{
                "type": "doubleMax",
                "name": "max_ues_data",
                "fieldName" : "ues_data"
        },  
        {
                "type": "doubleMax",
                "name": "max_pcf_pct",
                "fieldName" : "pcf_pct"
        },
		{
                "type": "doubleMax",
                "name": "max_enb_simple_area_agg_score",
                "fieldName" : "enb_simple_area_agg_score"
        },
		{
                "type": "longMax",
                "name": "max_enb_area_subscriber_count",
                "fieldName" : "enb_area_subscriber_count"
        },
		{
                "type": "doubleMax",
                "name": "max_enb_simple_device_agg_score",
                "fieldName" : "enb_simple_device_agg_score"
        },
		{
                "type": "longMax",
                "name": "max_enb_device_subscriber_count",
                "fieldName" : "enb_device_subscriber_count"
        },
        {
                  "type": "doubleMax",
                "name": "max_cd_pct",
                "fieldName" : "cd_pct"
        },
		{
                "type": "doubleMax",
                "name": "max_srf_pct",
                "fieldName" : "srf_pct"
        },
                {
                "type": "doubleMax",
                "name": "max_session_setup_failures_cnt",
                "fieldName" : "session_setup_failures_cnt"
        },
        {
                "type": "doubleMax",
                "name": "max_session_setup_attempts_cnt",
                "fieldName" : "session_setup_attempts_cnt"
        },
        {
                "type": "doubleMax",
                "name": "max_context_drops_cnt",
                "fieldName" : "context_drops_cnt"
        },
        {
                "type": "doubleMax",
                "name": "max_context_events_cnt",
                "fieldName" : "context_events_cnt"
        },
        {
                "type": "doubleMax",
                "name": "max_sip_dropped_calls_pct",
                "fieldName" : "sip_dropped_calls_pct"
        },
        {
                "type": "doubleMax",
                "name": "max_volte_voice_calls_dropped_cnt",
                "fieldName" : "volte_voice_calls_dropped_cnt"
        },
        {
                "type": "doubleMax",
                "name": "max_volte_voice_setup_incomplete_calls_cnt",
                "fieldName" : "volte_voice_setup_incomplete_calls_cnt"
        },
        {
                "type": "doubleMax",
                "name": "max_rrc_radio_drop_pct",
                "fieldName" : "rrc_radio_drop_pct"
        },
        {
                "type": "doubleMax",
                "name": "max_radio_bearer_drops_cnt",
                "fieldName" : "radio_bearer_drops_cnt"
        },
        {
                "type": "doubleMax",
                "name": "max_radio_bearer_setup_attempts_cnt",
                "fieldName" : "radio_bearer_setup_attempts_cnt"
        },
        {
                "type": "doubleMax",
                "name": "max_downlink_throughput_kbps",
                "fieldName" : "downlink_throughput_kbps"
        },
        {
                "type": "doubleMax",
                "name": "max_uplink_throughput_kbps",
                "fieldName" : "uplink_throughput_kbps"
        },
        {
                "type": "doubleMax",
                "name": "max_downlink_data_volume",
                "fieldName" : "downlink_data_volume"
        },
		{
                "type": "doubleMax",
                "name": "max_preference_ratio",
                "fieldName" : "preference_ratio"
        },
        {
                "type": "doubleMax",
                "name": "max_downlink_active_time_ms",
                "fieldName" : "downlink_active_time_ms"
        },
        {
                "type": "doubleMax",
                "name": "max_uplink_data_volume",
                "fieldName" : "uplink_data_volume"
        },
        {
                "type": "doubleMax",
                "name": "max_uplink_active_time_ms",
                "fieldName" : "uplink_active_time_ms"
        },
        {
                "type": "doubleMax",
                "name": "travelling_indicator_cnt",
                "fieldName" : "travelling_indicator_cnt"
        },
        {
                "type": "doubleMax",
                "name": "max_volume_weighted_uplink_thpt_kbps",
                "fieldName" : "volume_weighted_uplink_thpt_kbps"
        },

        {
                "type": "doubleMax",
                "name": "max_volume_weighted_downlink_thpt_kbps",
                "fieldName" : "volume_weighted_downlink_thpt_kbps"
        },
        {
                "type": "doubleMax",
                "name": "max_attach_failure_pct_weight",
                "fieldName" : "attach_failure_pct_weight"
        },
        {
                "type": "doubleMax",
                "name": "max_rrc_setup_failure_pct_weight",
                "fieldName" : "rrc_setup_failure_pct_weight"
        },
        {
                "type": "doubleMax",
                "name": "max_srf_pct_weight",
                "fieldName" : "srf_pct_weight"
        },
        {
                "type": "doubleMax",
                "name": "max_pcf_pct_weight",
                "fieldName" : "pcf_pct_weight"
        },
        {
                "type": "doubleMax",
                "name": "max_cd_pct_weight",
                "fieldName" : "cd_pct_weight"
        },
        {
                "type": "doubleMax",
                "name": "max_sip_dropped_calls_pct_weight",
                "fieldName" : "sip_dropped_calls_pct_weight"
        },
        {
                "type": "doubleMax",
                "name": "max_rrc_radio_drop_pct_weight",
                "fieldName" : "rrc_radio_drop_pct_weight"
        },
        {
                "type": "doubleMax",
                "name": "max_downlink_throughput_kbps_weight",
                "fieldName" : "downlink_throughput_kbps_weight"
        },
        {
                "type": "doubleMax",
                "name": "max_uplink_throughput_kbps_weight",
                "fieldName" : "uplink_throughput_kbps_weight"
        },
        {
                "type": "doubleMax",
                "name": "max_ues_allserv",
                "fieldName" : "ues_allserv"
        },
		{
                "type": "longMax",
                "name": "max_service_request_failures_cnt",
                "fieldName" : "service_request_failures_cnt"
        },
		{
                "type": "longMax",
                "name": "max_service_request_attempts_cnt",
                "fieldName" : "service_request_attempts_cnt"
        },
        {
                "type": "doubleMax",
                "name": "max_ues_voice_retainability",
                "fieldName" : "ues_voice_retainability"
        },
		{
                "type": "doubleMax",
                "name": "max_ues_voice_reliability",
                "fieldName" : "ues_voice_reliability"
        },
		{
          "name" : "count",
          "type" : "count"
        }

           ]
    },
    "tuningConfig" : {
      "type" : "hadoop",
      "useCombiner": true,
      "indexSpec": {
          "bitmap": {
            "type": "roaring"
          }
      },
      "partitionsSpec" : {
        "type" : "hashed",
        "targetPartitionSize" : 1000000,
        "maxPartitionSize" : 7500000,
        "assumeGrouped" : true,
        "numShards" : -1
      },
      "jobProperties" : {
                        "mapreduce.map.java.opts":"-Duser.timezone=UTC -Dfile.encoding=UTF-8", "mapreduce.reduce.java.opts":"-Duser.timezone=UTC -Dfile.encoding=UTF-8"
          }
    }
  }
}
